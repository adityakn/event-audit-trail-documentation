
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Download the following script from GitHub . create-saml-sp.sh You can configure UAA as SAML identity provider to integrate with other service providers. Specify your UAA instance as the intended ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="task"></meta><meta name="DC.Title" content="Configuring UAA as an Identity Provider"></meta><meta name="abstract" content=""></meta><meta name="description" content=""></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="task_nbg_cg2_3v"></meta><meta name="DC.Language" content="en-US"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Configuring UAA as an Identity Provider</title><!--  Generated with Oxygen version 17.1, build number 2016032212.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="task_nbg_cg2_3v">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
<h1 class="title topictitle1">Configuring UAA as an Identity Provider</h1>
<div class="body taskbody"><p class="shortdesc"></p>
<div class="section prereq p">
            <ul class="ul" id="task_nbg_cg2_3v__ul_e9727a98-b308-4d04-bdea-d0b80703b697"><li class="li">Download the following script from <a class="xref" href="https://github.com/PredixDev/uaa-scripts.git" target="_blank">GitHub</a>.<ul class="ul" id="task_nbg_cg2_3v__ul_5cb30f7d-87af-442e-8c59-5bbb039cb097"><li class="li"><samp class="ph codeph">create-saml-sp.sh</samp></li>
</ul>
</li>
</ul>

        </div>
<div class="section context">
            <p class="p">You can configure UAA as SAML identity provider to integrate with other service providers.</p>

        </div>
<ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">Specify your UAA instance as the intended target.</span><div class="itemgroup info">
                    <pre class="pre codeblock">uaac target &lt;uaa_instance_url&gt; </pre>

                    <p class="p"><samp class="ph codeph">&lt;uaa_instance_url&gt;</samp> is the URL to your trusted issuer, for example, <samp class="ph codeph">https://11fa0273-9e2a-37e2-9d06-2c95a1f4f5ea.predix-uaa.run.aws-usw02-pr.ice.predix.io</samp>. You can retrieve this URL from the VCAP_SERVICES environment variable after binding your UAA instance to an application. </p>

                </div></li>
<li class="li step stepexpand"><span class="ph cmd">Log in using the administrative client.</span><div class="itemgroup info">
                    <pre class="pre codeblock">uaac token client get admin</pre>

                </div></li>
<li class="li step stepexpand"><span class="ph cmd">Specify the administrative client secret at the prompt.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Export Identity Provider (IdP) metadata from UAA. Provide this metadata to your Service Provider (SP) administrator so it can be imported into the SP application. </span><div class="itemgroup info"><p class="p">The <samp class="ph codeph">uaa_idp_metadata.xml</samp> file is the IdP metadata generated by your UAA instance. It is available at the following endpoint:</p>
<samp class="ph codeph">&lt;uaa_instance_url&gt;/saml/idp/metadata</samp><p class="p">For example,</p>
<samp class="ph codeph">https://13fa0384-9e2a-48e2-9d06-2c95a1f4f5ea.predix-uaa.run.aws-usw02-pr.ice.predix.io/saml/idp/metadata</samp></div></li>
<li class="li step stepexpand"><span class="ph cmd">Import the UAA IdP metadata into your SP application.</span><div class="itemgroup info">This step depends on the type of service provider you use. For more information, refer to the documentation for your service provider.</div></li>
<li class="li step stepexpand"><span class="ph cmd">Provision a user for UAA IdP.</span><div class="itemgroup info">
                    <pre class="pre codeblock">uaac target &lt;UAA_IDP_INSTANCE_URL&gt;
uaac token client get admin
client secret: &lt;admin client secret&gt;
uaac user add &lt;user-name&gt; --given_name &lt;first-name&gt; --family_name &lt;last-name&gt; --emails &lt;email&gt; -p &lt;password&gt;
uaac group add zones.uaa.admin
uaac member add zones.uaa.admin &lt;user-name&gt;</pre>

                </div></li>
<li class="li step stepexpand"><span class="ph cmd">Add Service Provider configuration to UAA IdP.</span><ol type="a" class="ol substeps" id="task_nbg_cg2_3v__substeps_wkv_142_3v"><li class="li substep substepexpand"><span class="ph cmd">Obtain an access token. The client that you use to obtain access token must have the <samp class="ph codeph">sps.write</samp> scope. </span><div class="itemgroup info">
                            <p class="p">You are redirected to UAA IdP login page. Enter credentials for user provisioned in step 3.</p>

                            <p class="p">For more information on obtaining access tokens, see <a class="xref" href="c_using_uaa_to_obtain_access_tokens.html#concept_xhx_c1c_fv">Using UAA to Obtain OAuth2 Access Tokens</a>.</p>

                        </div></li>
<li class="li substep substepexpand"><span class="ph cmd">Use the <samp class="ph codeph">create-saml-sp.sh</samp> script to add the SP configuration.</span><div class="itemgroup info">
                            <pre class="pre codeblock">./create-saml-sp.sh -n &lt;uaa-sp-name&gt; -m uaa-sp-metadata.xml -i</pre>

                        </div></li>
</ol>
</li>
<li class="li step stepexpand"><span class="ph cmd">Check that the SP configuration was successfully added.</span><div class="itemgroup info">
                    <pre class="pre codeblock">uaac curl /saml/service-providers</pre>

                </div></li>
</ol>
</div>
<div class="navfooter"><!----></div><div class="footer">WebHelp output generated by<a class="oxyFooter" href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>