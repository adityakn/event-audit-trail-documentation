
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Procedure for creating additional OAuth2 client to access a UAA instance. Log in to predix.io. The OAuth 2.0 protocol establishes a client as an application that makes protected resource requests on ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="task"></meta><meta name="DC.Title" content="Creating an OAuth2 Client"></meta><meta name="abstract" content="Procedure for creating additional OAuth2 client to access a UAA instance."></meta><meta name="description" content="Procedure for creating additional OAuth2 client to access a UAA instance."></meta><meta name="DC.Relation" scheme="URI" content="t_updating_the_oauth2_client.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="task_79a81b74-552e-4f74-abfc-bd37e6adac87"></meta><meta name="DC.Language" content="en-US"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Creating an OAuth2 Client</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="task_79a81b74-552e-4f74-abfc-bd37e6adac87">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
<h1 class="title topictitle1">Creating an OAuth2 Client</h1>
<div class="body taskbody"><p class="shortdesc">Procedure for creating additional OAuth2 client to access a UAA instance.</p>
<div class="section prereq p">
            <ul class="ul" id="task_79a81b74-552e-4f74-abfc-bd37e6adac87__ul_e9727a98-b308-4d04-bdea-d0b80703b697"><li class="li">Log in to predix.io.</li>
</ul>

        </div>
<div class="section context">
            <p class="p">The OAuth 2.0 protocol establishes a client as an application that makes protected resource requests on behalf of the resource owner and with its authorization. When you create a UAA instance, an admin client is automatically created for you to be able to configure your UAA instance. The password for the admin client is what you specify while creating the UAA instance. You can create additional clients for different applications that authenticate with the same instance of UAA server. You can assign different access permissions to each client depending on your application's requirement.</p>

        </div>
<ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">In the Console view, select the Space where your services are located.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the Services Instances page, select the UAA instance that you need to configure.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Select the <span class="ph uicontrol">Configure Service Instance</span> option.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In UAA Dashboard, select the <span class="ph uicontrol">Client Management</span> tab.</span><div class="itemgroup info">The Client Management tab has two sections, <span class="ph uicontrol">Clients</span> and <span class="ph uicontrol">Service Instances</span>. The <span class="ph uicontrol">Service Instances</span> section displays the service instances that you have created for your services.</div></li>
<li class="li step stepexpand"><span class="ph cmd">Click on the <span class="ph uicontrol">Create Client</span> button to open the <span class="ph uicontrol">Create Client</span> form.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Specify the following values in the <span class="ph uicontrol">Create Client</span> form:</span><div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_79a81b74-552e-4f74-abfc-bd37e6adac87__table_ehl_3rb_1x" class="table" frame="border" border="1" rules="all"><thead class="thead" align="left"><tr class="row"><th class="entry" valign="top" width="27.70083102493075%" id="d23201e75">Field</th>
<th class="entry" valign="top" width="72.29916897506925%" id="d23201e77">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Client ID</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Specify a name for the OAuth2 client you are creating.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Client Secret</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Specify the password. It is important that you keep a note of this password. If lost, this password cannot be retrieved.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Confirm Client Secret</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Re-enter the client secret.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Authorized Grant Types</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Choose one or more of the following grant type(s):<ul class="ul" id="task_79a81b74-552e-4f74-abfc-bd37e6adac87__ul_pyf_jnq_rw"><li class="li"><span class="ph uicontrol">client_credentials</span><p class="p">When you use the client credentials grant type, the OAuth2 endpoint in UAA accepts the client id and client secret and provides Access Tokens.</p>
</li>
<li class="li"><span class="ph uicontrol">implicit</span><p class="p">When you use the implicit grant type, UAA directly issues an Access Token to the client without authenticating the client. This reduces the number of round trips required to obtain an access token. </p>
</li>
<li class="li"><span class="ph uicontrol">password</span><p class="p">When you use the resource owner password credentials grant type, the OAuth2 endpoint in UAA accepts the username and password and provides Access Tokens.</p>
</li>
<li class="li"><span class="ph uicontrol">authorization_code</span><p class="p">When you use the authorization code grant type, the client directs the resource owner to UAA, which in turn directs the resource owner back to the client with the authorization code. </p>
<p class="p">When you use this grant type, a <samp class="ph codeph">refresh_token</samp> is also assigned by default.</p>
</li>
</ul>
<p class="p">For more information on various grant types, see <a class="xref" href="https://tools.ietf.org/html/rfc6749" target="_blank">RFC 6749</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Scopes</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Scopes are permissions associated with an OAuth Client for a user accessing a resource through an application. The user permissions are for authorization grant types <samp class="ph codeph">authorization_code</samp>, <samp class="ph codeph">password</samp> and <samp class="ph codeph">implicit</samp>. The scopes determine if an application is allowed to access on behalf of the user.<p class="p">By default, the admin client is assigned all the required scopes. For a new client, an administrator can choose the scopes to be added based on client requirements.</p>
<p class="p">For a complete list of scopes that can be assigned, see <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst#scopes-authorized-by-the-uaa" target="_blank">Scopes Authorized by the UAA</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Authorities</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Authorities are permissions associated with the OAuth Client when an application or API is acting on its own behalf to access a resource with its own credentials and there is no user involvement. The permissions are for authorization grant type of <samp class="ph codeph">client_credentials</samp>.<p class="p">By default, the admin client is assigned all the required authorities. For a new client, an administrator can choose the authorities to be added based on client requirements.</p>
<p class="p">The list of authorities is same as the list of scopes. For a complete list, see <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst#scopes-authorized-by-the-uaa" target="_blank">Scopes Authorized by the UAA</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Auto Approved Scopes</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Specify scopes that can be approved automatically for the client without explicit approval from resource owner.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Redirect URI</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Specify a redirect URI to redirect client after login. For example, <samp class="ph codeph">http://example-app.com/welcome</samp>.<p class="p">This URI is used when you start using UAA as service provider for your external Identify provider.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Access Token Validity</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Specifies the access token expiration time in ms. </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Refresh Token Validity</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Specifies the refresh token expiration time in ms.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d23201e75 "><span class="ph uicontrol">Allowed Providers</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d23201e77 ">Specify the names of the external identity providers, if any. This field is required if you are using external identity providers with UAA as a service provider.</td>
</tr>
</tbody>
</table>
</div>

                </div></li>
</ol>
</div>
<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="t_updating_the_oauth2_client.html">Updating the OAuth2 Client</a></strong><br xmlns="http://www.w3.org/1999/xhtml" />
Procedure for updating the OAuth2 client to add additional authorities or scopes that are specific to each platform service.</li>
</ul>
</div>
<div class="topic task nested1" id="task_m5w_dld_rw"><h2 class="title topictitle2">Using UAAC to Create an OAuth2 Client</h2>
<div class="body taskbody"><p class="shortdesc">Optional procedure for using UAA command-line interface (UAAC) instead of graphical user interface to create an OAuth2 client. </p>
<div class="section context">
                <p class="p">You can use the UAAC, to manage your UAA instance. For more information on installing the command-line interface, see <a class="xref" href="https://github.com/cloudfoundry/cf-uaac" target="_blank">https://github.com/cloudfoundry/cf-uaac</a>.</p>

            </div>
<ol class="ol steps" id="task_m5w_dld_rw__steps_crw_2ld_rw"><li class="li step stepexpand"><span class="ph cmd">Specify your UAA instance as the intended target.</span><div class="itemgroup info">
                        <pre class="pre codeblock">uaac target &lt;uaa_instance_url&gt; </pre>

                        <p class="p"><samp class="ph codeph">&lt;uaa_instance_url&gt;</samp> is the URL to your trusted issuer, for example, <samp class="ph codeph">https://11fa0273-9e2a-37e2-9d06-2c95a1f4f5ea.predix-uaa.run.aws-usw02-pr.ice.predix.io</samp>. You can retrieve this URL from the VCAP_SERVICES environment variable after binding your UAA instance to an application. </p>

                    </div></li>
<li class="li step stepexpand"><span class="ph cmd">Log in using the administrative client.</span><div class="itemgroup info">
                        <pre class="pre codeblock">uaac token client get admin</pre>

                    </div></li>
<li class="li step stepexpand"><span class="ph cmd">Specify the administrative client secret at the prompt.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Use the following command to create the OAuth2 client:</span><div class="itemgroup info">
                        <pre class="pre codeblock">uaac client add [client_name] 
    --authorities "uaa.resource" 
    --scope "openid" 
    --autoapprove "openid" 
    --authorized_grant_types [authorization_code|implicit|password|client_credentials|refresh_token] 
    --redirect_uri [redirect_uri_1, redirect_uri_2, ...]</pre>

                        <p class="p">For more information on UAA options such as <samp class="ph codeph">scopes</samp> and <samp class="ph codeph">authorized_grant_types</samp>, see the UAA documentation at <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst" target="_blank">https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst</a>.</p>

                    </div></li>
</ol>
</div>
</div>
<div class="navfooter"><!----></div><div class="footer"><a class="oxyFooter" href="" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/GELogo1.jpg" height="36px" alt="General Electric"></img></span><span class="xmlauthor"> © 2015-2016 General Electric Company. All rights reserved.</span></a></div>
</body>
</html>